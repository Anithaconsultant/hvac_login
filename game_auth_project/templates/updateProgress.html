<!-- templates/update_user_board.html -->
<!DOCTYPE html>
<html>
<head>
    <title>Update User Game Progress</title>
</head>
<body>
    <h1>Update User Game Progress</h1>

    <!-- GET form -->
    <form id="getForm">
        <label>User ID: <input type="text" id="getUserId" required></label>
        <button type="submit">Get Progress</button>
    </form>

    <hr>

    <!-- PUT form -->
    <form id="putForm">
        <label>User ID: <input type="text" id="putUserId" required></label><br><br>
        <label>Level: <input type="number" name="level"></label><br>
        <label>Attempt Number: <input type="number" name="attempt_number"></label><br>
        <label>Completion Status: <input type="text" name="completion_status"></label><br>
        <label>Points Scored: <input type="number" name="points_scored"></label><br>
        <label>Max Points: <input type="number" name="max_points"></label><br>
        <label>Hint Penalty Points: <input type="number" name="hint_penalty_points"></label><br>
        <label>Bonus Points: <input type="number" name="bonus_points"></label><br>
        <label>Tools Earned: <input type="text" name="tools_earned"></label><br>
        <label>Badges: <input type="text" name="badges"></label><br>
        <label>Super Powers: <input type="text" name="super_powers"></label><br>
        <button type="submit">Update Progress</button>
    </form>

    <pre id="result"></pre>

    <script>
        document.getElementById("getForm").addEventListener("submit", function(e) {
            e.preventDefault();
            const userId = document.getElementById("getUserId").value;
            fetch(`/api/userboard/${userId}`, {
                method: 'GET'
            })
            .then(response => response.json())
            .then(data => {
                document.getElementById("result").innerText = JSON.stringify(data, null, 2);
            });
        });

        document.getElementById("putForm").addEventListener("submit", function(e) {
            e.preventDefault();
            const userId = document.getElementById("putUserId").value;
            const formData = new FormData(e.target);
            const jsonData = {};
            formData.forEach((value, key) => {
                if (value) jsonData[key] = isNaN(value) ? value : Number(value);
            });

            fetch(`/api/userboard/${userId}`, {
                method: 'PUT',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(jsonData)
            })
            .then(response => response.json())
            .then(data => {
                document.getElementById("result").innerText = JSON.stringify(data, null, 2);
            });
        });
    </script>
</body>
</html>
