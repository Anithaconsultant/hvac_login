{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="container mt-4">
    <div class="mb-3">
        <a href="{% url 'home' %}" class="btn btn-secondary">Back to Home</a>
    </div>
    <h2 class="mb-4" style="color:#fff;">My Game Progress</h2>
    
    <div class="table-responsive">
        <table class="table table-striped table-bordered">
            <thead class="thead-dark">
                <tr>
                    <th>Level</th>
                    <th>Attempt</th>
                    <th>Task</th>
                    <th>Status</th>
                    <th>Points</th>
                    <th>Max Points</th>
                    <th>Time Taken</th>
                    <th>Tools Earned</th>
                    <th>Badges</th>
                    <th>Super Powers</th>
                </tr>
            </thead>
            <tbody>
                {% for progress in progress_data %}
                    {% if progress.points_scored is not None %}  <!-- Only show rows with points -->
                    <tr>
                        <td>{{ progress.level }}</td>
                        <td>{{ progress.attempt_number }}</td>
                        <td>{{ progress.task_number }}</td>
                        <td>{{ progress.get_completion_status_display }}</td>
                        <td>{{ progress.points_scored }}</td>
                        <td>{{ progress.max_points }}</td>
                        <td>{{ progress.time_taken }}</td>
                        <td>{{ progress.tools_earned|default:"-" }}</td>
                        <td>{{ progress.badges|default:"-" }}</td>
                        <td>{{ progress.super_powers|default:"-" }}</td>
                    </tr>
                    {% endif %}
                {% empty %}
                <tr>
                    <td colspan="10" class="text-center">No progress data found</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}